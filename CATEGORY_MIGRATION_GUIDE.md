# ЁЯУж р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕г Migrate р╣Бр╕ер╕░р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ Category Code

## тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Бр╕Бр╣Йр╣Др╕Вр╣Бр╕ер╣Йр╕з

### 1. **Category Model** (catalog.py)
- р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕┤р╕ер╕Фр╣М `name_en` тЖТ р╕Кр╕╖р╣Ир╕нр╕ар╕▓р╕йр╕▓р╕нр╕▒р╕Зр╕Бр╕др╕й
- р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕┤р╕ер╕Фр╣М `code` тЖТ р╕гр╕лр╕▒р╕кр╕вр╣Ир╕н 3 р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕г

### 2. **Product.save()** (catalog.py)
- р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ир╕▓р╕Б `category.name[:3]` тЖТ `category.code`
- SKU р╕Ир╕░р╣Ар╕Ыр╣Зр╕Щ: ENG-001, BRK-001, SUS-001

---

## ЁЯЪА р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### **Step 1: р╕кр╕гр╣Йр╕▓р╕З Migration**

```bash
python manage.py makemigrations
```

**р╕Др╕▓р╕Фр╕зр╣Ир╕▓р╕Ир╕░р╣Ар╕лр╣Зр╕Щ:**
```
Migrations for 'products':
  products\migrations\0XXX_auto_YYYYMMDD_HHMM.py
    - Add field name_en to category
    - Add field code to category
```

---

### **Step 2: Run Migration**

```bash
python manage.py migrate
```

**р╕Др╕▓р╕Фр╕зр╣Ир╕▓р╕Ир╕░р╣Ар╕лр╣Зр╕Щ:**
```
Running migrations:
  Applying products.0XXX_auto_YYYYMMDD_HHMM... OK
```

---

### **Step 3: р╣Ар╕Хр╕┤р╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И 8 р╕лр╕бр╕зр╕Ф**

```bash
python manage.py seed_categories
```

**р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:**
```
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: ENG - р╕гр╕░р╕Ър╕Ър╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: SUS - р╕Кр╣Ир╕зр╕Зр╕ер╣Ир╕▓р╕З
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: BRK - р╕гр╕░р╕Ър╕Ър╣Ар╕Ър╕гр╕Б
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: ELE - р╕гр╕░р╕Ър╕Ър╣Др╕Яр╕Яр╣Йр╕▓
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: BDY - р╕Хр╕▒р╕зр╕Цр╕▒р╕З
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: INT - р╕ар╕▓р╕вр╣Гр╕Щр╕гр╕Ц
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: FLD - р╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕бр╕╡р╕ар╕▒р╕Ур╕Ср╣М
тЬЕ р╕кр╕гр╣Йр╕▓р╕З: TOL - р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н

ЁЯУК р╕кр╕гр╕╕р╕Ы: р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И 8 р╕лр╕бр╕зр╕Ф, р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з 0 р╕лр╕бр╕зр╕Ф
```

---

## тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### **1. р╣Ар╕Кр╣Зр╕Др╣Гр╕Щ Django Admin:**
```
http://127.0.0.1:8000/admin/products/category/
```

р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ:
```
ENG - р╕гр╕░р╕Ър╕Ър╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М
SUS - р╕Кр╣Ир╕зр╕Зр╕ер╣Ир╕▓р╕З
BRK - р╕гр╕░р╕Ър╕Ър╣Ар╕Ър╕гр╕Б
ELE - р╕гр╕░р╕Ър╕Ър╣Др╕Яр╕Яр╣Йр╕▓
BDY - р╕Хр╕▒р╕зр╕Цр╕▒р╕З
INT - р╕ар╕▓р╕вр╣Гр╕Щр╕гр╕Ц
FLD - р╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕бр╕╡р╕ар╕▒р╕Ур╕Ср╣М
TOL - р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н
```

---

### **2. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕гр╣Йр╕▓р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓:**

```bash
python manage.py shell
```

```python
from products.models import Product, Category

# р╣Ар╕ер╕╖р╕нр╕Бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И
brk = Category.objects.get(code='BRK')

# р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓ (р╣Др╕бр╣Ир╣Гр╕кр╣И SKU)
product = Product.objects.create(
    name='р╕Ьр╣Йр╕▓р╣Ар╕Ър╕гр╕Др╕лр╕Щр╣Йр╕▓ Toyota Vios',
    category=brk,
    cost_price=450,
    selling_price=650
)

print(product.sku)  # р╕Др╕зр╕гр╣Др╕Фр╣Й: BRK-001 тЬЕ
```

---

## ЁЯОи р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З SKU р╕Чр╕╡р╣Ир╣Др╕Фр╣Й

```
ENG-001  тЖТ р╣Др╕кр╣Йр╕Бр╕гр╕нр╕Зр╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З
ENG-002  тЖТ р╕кр╕▓р╕вр╕Юр╕▓р╕Щр╕лр╕Щр╣Йр╕▓р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З
SUS-001  тЖТ р╣Вр╕Кр╣Йр╕Др╕нр╕▒р╕Юр╕лр╕Щр╣Йр╕▓
SUS-002  тЖТ р╕ер╕╣р╕Бр╕лр╕бр╕▓р╕Бр╕Ыр╕╡р╕Бр╕Щр╕Б
BRK-001  тЖТ р╕Ьр╣Йр╕▓р╣Ар╕Ър╕гр╕Др╕лр╕Щр╣Йр╕▓ Toyota
BRK-002  тЖТ р╕Ьр╣Йр╕▓р╣Ар╕Ър╕гр╕Др╕лр╕ер╕▒р╕З Honda
ELE-001  тЖТ р╣Бр╕Ър╕Хр╣Ар╕Хр╕нр╕гр╕╡р╣И 60Ah
BDY-001  тЖТ р╕Бр╕▒р╕Щр╕Кр╕Щр╕лр╕Щр╣Йр╕▓
INT-001  тЖТ р╕Юр╕гр╕бр╕Ыр╕╣р╕Юр╕╖р╣Йр╕Щ
FLD-001  тЖТ р╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З 10W-40
TOL-001  тЖТ р╕Ыр╕гр╕░р╣Бр╕Ир╕Ыр╕▓р╕Бр╕Хр╕▓р╕в
```

---

## ЁЯУЛ р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╕Чр╕▒р╣Йр╕З 8 р╕лр╕бр╕зр╕Ф

| # | р╕Кр╕╖р╣Ир╕нр╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в | р╕Кр╕╖р╣Ир╕нр╕ар╕▓р╕йр╕▓р╕нр╕▒р╕Зр╕Бр╕др╕й | Code |
|---|-------------|----------------|------|
| 1 | р╕гр╕░р╕Ър╕Ър╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М | Engine System | ENG |
| 2 | р╕Кр╣Ир╕зр╕Зр╕ер╣Ир╕▓р╕З | Suspension | SUS |
| 3 | р╕гр╕░р╕Ър╕Ър╣Ар╕Ър╕гр╕Б | Brake System | BRK |
| 4 | р╕гр╕░р╕Ър╕Ър╣Др╕Яр╕Яр╣Йр╕▓ | Electrical System | ELE |
| 5 | р╕Хр╕▒р╕зр╕Цр╕▒р╕З | Body Parts | BDY |
| 6 | р╕ар╕▓р╕вр╣Гр╕Щр╕гр╕Ц | Interior | INT |
| 7 | р╕Щр╣Йр╕│р╕бр╕▒р╕Щр╣Ар╕Др╕бр╕╡р╕ар╕▒р╕Ур╕Ср╣М | Fluids & Chemicals | FLD |
| 8 | р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н | Tools | TOL |

---

## тЪая╕П р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н

### **р╕Цр╣Йр╕▓р╕бр╕╡р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╣Ар╕Бр╣Ир╕▓р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з:**

р╕Хр╣Йр╕нр╕Зр╣Ар╕Хр╕┤р╕б code р╣Гр╕лр╣Йр╕лр╕бр╕зр╕Фр╣Ар╕Бр╣Ир╕▓:

```bash
python manage.py shell
```

```python
from products.models import Category

# р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: р╕Цр╣Йр╕▓р╕бр╕╡р╕лр╕бр╕зр╕Ф "р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М" р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з
Category.objects.filter(name="р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М").update(
    code="ENG",
    name_en="Engine System"
)

# р╕Чр╕│р╣Бр╕Ър╕Ър╕Щр╕╡р╣Йр╕Бр╕▒р╕Ър╕Чр╕╕р╕Бр╕лр╕бр╕зр╕Фр╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣И
```

---

## ЁЯОп р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З

### **р╕Бр╣Ир╕нр╕Щр╣Бр╕Бр╣Й:**
```python
# Category
name = "р╕гр╕░р╕Ър╕Ър╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М"
description = "..."

# Product SKU
SKU = "р╕гр╕░р╕Ъ-001"  тЭМ р╣Др╕бр╣Ир╕кр╕зр╕в
```

### **р╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Й:**
```python
# Category
name = "р╕гр╕░р╕Ър╕Ър╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕вр╕Щр╕Хр╣М"
name_en = "Engine System"
code = "ENG"
description = "..."

# Product SKU
SKU = "ENG-001"  тЬЕ р╕кр╕зр╕в!
```

---

## тЬЕ р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ!

**р╕гр╕░р╕Ър╕Ър╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**
- тЬЕ Category р╕бр╕╡ code р╣Бр╕ер╣Йр╕з
- тЬЕ Product.save() р╣Гр╕Кр╣Й code р╣Бр╕ер╣Йр╕з
- тЬЕ SKU р╕кр╕зр╕в (ENG-001, BRK-001)
- тЬЕ р╕бр╕╡р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И 8 р╕лр╕бр╕зр╕Фр╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Й

---

## ЁЯЖШ р╕Цр╣Йр╕▓р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓

### **Error: code field is required**
тЖТ р╕гр╕▒р╕Щ migration р╕Бр╣Ир╕нр╕Щ: `python manage.py migrate`

### **Error: UNIQUE constraint failed**
тЖТ р╕бр╕╡р╕лр╕бр╕зр╕Фр╕Лр╣Йр╕│ р╕ер╕Ър╕нр╕нр╕Бр╕Бр╣Ир╕нр╕Щ р╕лр╕гр╕╖р╕нр╕Вр╣Йр╕▓р╕б

### **SKU р╕вр╕▒р╕Зр╣Ар╕Ыр╣Зр╕Щр╕ар╕▓р╕йр╕▓р╣Др╕Чр╕в**
тЖТ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ category р╕бр╕╡ code р╕лр╕гр╕╖р╕нр╕вр╕▒р╕З

---

**р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╣Йр╕зр╕Др╕гр╕▒р╕Ъ!** ЁЯЪА
